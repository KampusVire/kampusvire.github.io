(this.webpackJsonpkampusvirefront=this.webpackJsonpkampusvirefront||[]).push([[0],{32:function(e,t,n){},4:function(e,t){t.ENDPOINT="http://ec2-13-126-181-62.ap-south-1.compute.amazonaws.com:8000",t.GRAPHQL_ENDPOINT=t.ENDPOINT+"/graphql"},63:function(e,t,n){},65:function(e,t,n){},75:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(16),s=n.n(c),o=n(3),r=n(2),i=n(4),l=n(5),d=n.n(l),j=n(12),b=n.n(j),u=(n(63),n(32),n(0)),p=function(e,t){var n=Object(a.useState)(1),c=Object(r.a)(n,2),s=c[0],o=c[1],l=Object(a.useState)(""),j=Object(r.a)(l,2),p=j[0],h=j[1],m=Object(a.useState)(""),O=Object(r.a)(m,2),f=O[0],x=O[1],g=Object(a.useState)(""),N=Object(r.a)(g,2),v=N[0],y=N[1],I=Object(a.useState)(!1),S=Object(r.a)(I,2),k=(S[0],S[1]),w=Object(a.useState)(""),P=Object(r.a)(w,2),C=(P[0],P[1]);function E(){k(!0);var e=new b.a;e.append("otp_id",f),e.append("otp",v);var t={method:"post",url:"".concat(i.ENDPOINT,"/api/otp/verify/"),data:e};d()(t).then((function(e){console.log(e),e.data.success?(C(""),function(e,t){var n=new b.a;n.append("otp_id",e),n.append("otp_token",t);var a={method:"post",url:"".concat(i.ENDPOINT,"/api/login/"),data:n};d()(a).then((function(e){console.log(e),e.data.success?(C(""),localStorage.setItem("token",e.data.token),window.location.href="/"):C(e.data.error)})).catch((function(e){C("Failed to request")}))}(f,e.data.otp_token)):C(e.data.error)})).catch((function(e){C("Failed to request")})),k(!1)}return Object(u.jsx)(u.Fragment,{children:1===s?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"text-center header",children:"Kampus Vire"}),Object(u.jsxs)("div",{className:"my-5 container",children:[Object(u.jsx)("label",{for:"phoneNumber",className:"form-label m-0 nunito_sans fs-4",children:"Your Mobile Number"}),Object(u.jsx)("br",{}),Object(u.jsx)("small",{className:"text-muted open_sans",children:"We will send an otp for verification"}),Object(u.jsx)("input",{type:"phone",className:"form-control mt-4 fst-italic",id:"phoneNumber",placeholder:"Phone Number",value:p,onChange:function(e){h(e.target.value)}})]}),Object(u.jsx)("div",{className:"d-grid gap-2 d-md-block container button",children:Object(u.jsx)("button",{className:"btn bg-green text-light",type:"button",onClick:function(){!function(){k(!0);var e=new b.a;e.append("phoneno",p);var t={method:"post",url:"".concat(i.ENDPOINT,"/api/otp/request/"),data:e};d()(t).then((function(e){e.data.success?(x(e.data.otp_id),o(2),C("")):C(e.data.error)})).catch((function(e){C("Failed to request")})),k(!1)}()},children:"Continue"})})]}):2===s?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"text-center header",children:"Kampus Vire"}),Object(u.jsxs)("div",{className:"my-5 container",children:[Object(u.jsx)("label",{for:"phoneNumber",className:"form-label m-0 nunito_sans fs-4",children:"Enter The OTP"}),Object(u.jsx)("br",{}),Object(u.jsx)("small",{className:"text-muted open_sans",children:"Please enter the OTP sent"}),Object(u.jsx)("input",{type:"phone",className:"form-control mt-4 fst-italic",placeholder:"Enter the OTP",value:v,onChange:function(e){y(e.target.value)}}),Object(u.jsxs)("p",{className:"fs-6 text-center my-3 rubik",children:["Didn\u2019t recieve OTP?",Object(u.jsx)("b",{className:"text-primary",children:"Resend"})," in  ",Object(u.jsx)("b",{children:"60s"})," ",Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:"#",className:"text-decoration-none rubik",children:"Change phone Number"})]})]}),Object(u.jsx)("div",{className:"d-grid gap-2 d-md-block container button",children:Object(u.jsx)("button",{className:"btn bg-green text-light",type:"button",onClick:function(){E()},children:"Continue"})})]}):Object(u.jsx)("div",{children:"Not yet"})})},h=function(e,t){var n=Object(a.useState)(1),c=Object(r.a)(n,2),s=c[0],o=c[1],l=Object(a.useState)(""),j=Object(r.a)(l,2),p=j[0],h=j[1],m=Object(a.useState)(""),O=Object(r.a)(m,2),f=O[0],x=O[1],g=Object(a.useState)(""),N=Object(r.a)(g,2),v=N[0],y=N[1],I=Object(a.useState)(!1),S=Object(r.a)(I,2),k=(S[0],S[1]),w=Object(a.useState)(""),P=Object(r.a)(w,2),C=(P[0],P[1]);function E(){k(!0);var e=new b.a;e.append("otp_id",f),e.append("otp",v);var t={method:"post",url:"".concat(i.ENDPOINT,"/api/otp/verify/"),data:e};d()(t).then((function(e){console.log(e),e.data.success?(C(""),function(e,t){var n=new b.a;n.append("otp_id",e),n.append("otp_token",t);var a={method:"post",url:"".concat(i.ENDPOINT,"/api/login/"),data:n};d()(a).then((function(e){console.log(e),e.data.success?(C(""),localStorage.setItem("token",e.data.token),window.location.href="/"):C(e.data.error)})).catch((function(e){C("Failed to request")}))}(f,e.data.otp_token)):C(e.data.error)})).catch((function(e){C("Failed to request")})),k(!1)}return Object(u.jsx)(u.Fragment,{children:1===s?Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Enter Mobile no  "}),Object(u.jsx)("input",{value:p,onChange:function(e){h(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{onClick:function(){!function(){k(!0);var e=new b.a;e.append("phoneno",p);var t={method:"post",url:"".concat(i.ENDPOINT,"/api/otp/request/"),data:e};d()(t).then((function(e){e.data.success?(x(e.data.otp_id),o(2),C("")):C(e.data.error)})).catch((function(e){C("Failed to request")})),k(!1)}()},children:"Request OTP"})]}):2===s?Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Enter Otp"}),Object(u.jsx)("input",{value:v,onChange:function(e){y(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{onClick:function(){E()},children:"Verify OTP"})]}):Object(u.jsx)("div",{children:"Not yet"})})},m=n(13),O=(n(65),n.p+"static/media/user.c7098dda.jpg");function f(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("nav",{className:"navbar navbar-dark bg-green sticky-top",children:[Object(u.jsx)("input",{type:"checkbox",className:"toggler",id:"checkBox",onClick:function(){var e=document.getElementById("checkBox"),t=document.getElementById("sideMenu");1==e.checked?(t.classList.remove("hide"),t.classList.add("show"),document.getElementById("reduceOpacity").classList.add("opacity-50"),document.getElementById("reduceOpacity").classList.remove("opacity-100")):(t.classList.remove("show"),t.classList.add("hide"),document.getElementById("reduceOpacity").classList.add("opacity-100"),document.getElementById("reduceOpacity").classList.remove("opacity-500"))}}),Object(u.jsx)("div",{className:"hamburger",children:Object(u.jsx)("div",{})}),Object(u.jsx)("i",{className:"fas fa-search mx-3 text-light fs-3","data-bs-toggle":"modal","data-bs-target":"#searchModal"})]}),Object(u.jsx)("div",{className:"sidebar hide",id:"sideMenu",children:Object(u.jsxs)("div",{className:"profileInfo p-4 bg-green",children:[Object(u.jsx)("div",{className:"bg-green profilePic mb-3",children:Object(u.jsx)("img",{src:O,className:"float-start"})}),Object(u.jsxs)("div",{className:"nunito_sans text-light fs-5 lh-1",children:[Object(u.jsx)("b",{className:"mb-2 d-block",children:"Sumanshu Kumar Shaw"}),Object(u.jsx)("small",{children:"Prince on the streets and a freak in the sheets \ud83c\udf1d \ud83c\udf1a \ud83c\udf1d"})]})]})}),Object(u.jsx)("div",{className:"modal fade",id:"searchModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(u.jsx)("div",{className:"modal-dialog",children:Object(u.jsxs)("div",{className:"modal-content",children:[Object(u.jsxs)("div",{className:"modal-header",children:[Object(u.jsx)("h5",{className:"modal-title rubik",id:"exampleModalLabel",children:"Search For"}),Object(u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{className:"modal-body",children:Object(u.jsx)("form",{children:Object(u.jsx)("div",{className:"mb-3",children:Object(u.jsx)("input",{type:"text",className:"form-control open_sans fst-italic text-muted",id:"recipient-name"})})})}),Object(u.jsx)("div",{className:"modal-footer",children:Object(u.jsx)("div",{className:"d-grid gap-2 d-md-block container",children:Object(u.jsx)("button",{className:"btn btn-success bg-green nunito_sans fw-bold",type:"button",children:"Search Now"})})})]})})})]})}var x=n.p+"static/media/amico.472c306e.png",g=n(9);function N(e){return Object(u.jsxs)("div",{className:"card my-1 p-0 bg-light position-relative overflow-hidden",style:{width:"48%"},children:[Object(u.jsx)("img",{src:i.ENDPOINT+"/media/"+e.picture,className:"card-img-top",alt:"Image Not available"}),Object(u.jsxs)("div",{className:"card-body p-2",children:[Object(u.jsx)("h5",{className:"card-title text-center open_sans fw-bold",children:e.shopName}),Object(u.jsx)("button",{className:"btn bg-green mb-2 mx-auto d-block",children:Object(u.jsx)(g.b,{to:"/shop/"+e.shopID,className:"text-decoration-none fs-6 text-light rubik fw-bold ",children:"Oder here"})})]})]})}var v=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),o=Object(r.a)(s,2),l=o[0],j=o[1],b=localStorage.getItem("token");if(!l){var p=JSON.stringify({query:"query{\n            allShops{\n              edges{\n                node{\n                  objId\n                  name\n                  picture\n                  operatingDays\n                  openAt\n                  closeAt\n                }\n              }\n            }\n          }",variables:{}}),h={method:"post",url:i.GRAPHQL_ENDPOINT,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)},data:p};d()(h).then((function(e){j(!0),e.data.data.allShops.edges.forEach((function(e){console.log(e.node),c([].concat(Object(m.a)(n),[e.node]))}))})).catch((function(e){console.log(e)}))}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(f,{}),Object(u.jsxs)("div",{id:"reduceOpacity",className:"opacity-100",children:[Object(u.jsx)("img",{src:x,className:"img-fluid d-block mx-auto my-3",alt:"no"}),Object(u.jsx)("h1",{className:"text-center nunito_sans fw-bolder",children:"Canteen and Shops"}),Object(u.jsx)("div",{className:"d-flex flex-wrap justify-content-around",children:n.map((function(e){return Object(u.jsx)(N,{shopName:e.name,shopID:e.objId,picture:e.picture})}))})]})]})},y=n(10),I=n.n(y),S=n(15);function k(){return(k=Object(S.a)(I.a.mark((function e(){var t,n,a,c,s,o,l,j,b,u,p,h,m,O,f,x,g,N;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(n=null!==(t=JSON.parse(localStorage.getItem("cart")))&&void 0!==t?t:{}).length){e.next=3;break}return e.abrupt("return",[]);case 3:for(a=localStorage.getItem("token"),c=[],s=0,o=Object.entries(n);s<o.length;s++)for(l=Object(r.a)(o[s],2),j=l[0],b=l[1],u=0,p=Object.entries(b);u<p.length;u++)h=Object(r.a)(p[u],2),m=h[0],O=h[1],c.push({shop_id:parseInt(j),objId:parseInt(m),quantity:parseInt(O)});return f=JSON.stringify({query:"query($listOfIds : [Int]!){\n            filterByIds(listOfIds : $listOfIds){\n              edges{\n                node{\n                  objId\n                  name\n                  picture\n                  price\n                  shop{\n                    objId\n                    name\n                  }\n                }\n              }\n            }\n          }",variables:{listOfIds:c.map((function(e){return e.objId}))}}),x={method:"post",url:i.GRAPHQL_ENDPOINT,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},data:f},e.next=10,d()(x);case 10:if(void 0!=(g=e.sent).data){e.next=13;break}return e.abrupt("return",{});case 13:return N=[],g.data.data.filterByIds.edges.forEach((function(e){N.push({objId:parseInt(e.node.objId),name:e.node.name,picture:e.node.picture,price:e.node.price,shop:e.node.shop.name,shopObjId:e.node.shop.objId,quantity:c.find((function(t){return t.objId==parseInt(e.node.objId)})).quantity})})),e.abrupt("return",N);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(S.a)(I.a.mark((function e(t,n){var a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=null!==(a=JSON.parse(localStorage.getItem("cart")))&&void 0!==a?a:{})[t.toString()]||(c[t.toString()]={}),c[t.toString()][n.toString()]||(c[t.toString()][n.toString()]=1,localStorage.setItem("cart",JSON.stringify(c)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(S.a)(I.a.mark((function e(t,n){var a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=null!==(a=JSON.parse(localStorage.getItem("cart")))&&void 0!==a?a:{})[t.toString()]&&c[t.toString()][n.toString()]&&delete c[t.toString()][n.toString()],localStorage.setItem("cart",JSON.stringify(c));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,n){return E.apply(this,arguments)}function E(){return(E=Object(S.a)(I.a.mark((function e(t,n,a){var c,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=null!==(c=JSON.parse(localStorage.getItem("cart")))&&void 0!==c?c:{})[t.toString()]){e.next=3;break}return e.abrupt("return");case 3:s[t.toString()][n.toString()]&&(s[t.toString()][n.toString()]=a),localStorage.setItem("cart",JSON.stringify(s));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(75);var _=n.p+"static/media/Rectangle 100 (1).08078749.png",q=n(18),T=(n(76),function(e){var t=Object(o.g)().shopid,n=Object(a.useState)([]),c=Object(r.a)(n,2),s=c[0],l=c[1],j=Object(a.useState)(!1),b=Object(r.a)(j,2),p=b[0],h=b[1],O=localStorage.getItem("token");if(!p){var f=JSON.stringify({query:"query($shopId : Int!){\n            allProducts(shopId : $shopId){\n              pageInfo{\n                startCursor\n                endCursor\n                hasPreviousPage\n                hasNextPage\n              }\n              edges{\n                cursor\n                node{\n                  id\n                  objId\n                  name\n                  picture\n                  price\n                  isAvailable\n                }\n              }\n            }\n          }",variables:{shopId:t}}),x={method:"post",url:i.GRAPHQL_ENDPOINT,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)},data:f};d()(x).then((function(e){h(!0);var t=[];e.data.data.allProducts.edges.forEach((function(e){t.push({objId:e.node.objId,name:e.node.name,picture:e.node.picture,price:e.node.price,isAvailable:e.node.isAvailable}),console.log(t)})),l([].concat(Object(m.a)(s),t))})).catch((function(e){console.log(e)}))}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"container-fluid sticky-top p-0 m-0 mb-4 w-100",style:{height:"162px"},children:[Object(u.jsx)(q.a,{position:"top-right",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(u.jsx)("img",{src:_,className:"img-fluid w-100 h-100"}),Object(u.jsxs)("div",{className:"container-fluid p-0 m-0 topBg text-light nunito_sans fs-1 d-flex flex-column-reverse align-items-center",children:[Object(u.jsxs)("div",{className:"position-absolute top-0 d-flex w-100 justify-content-between p-2 fs-4",children:[Object(u.jsx)("a",{onClick:function(){return e.history.goBack()},children:Object(u.jsx)("i",{className:"fas fa-arrow-left"})}),Object(u.jsx)("h3",{className:"fw-bold nunito_sans text-uppercase text-center d-inline pt-2",children:"menu"}),Object(u.jsx)("i",{className:"fas fa-map-marker-alt text-warning"})]}),Object(u.jsxs)("div",{className:"d-flex justify-content-between align-items-center w-50 mb-1",style:{fontSize:"1rem"},children:[Object(u.jsx)("small",{className:"open_sans",children:"Closes in 8pm"}),Object(u.jsx)("small",{className:"open_sans fw-bold text-danger",children:"Busy"})]}),Object(u.jsx)("div",{className:"text-center w-75 lh-1",children:"Canteen 1"})]})]}),Object(u.jsx)("div",{className:"container px-3 mt-3 d-flex flex-wrap justify-content-around",children:s.map((function(e){return Object(u.jsxs)("div",{className:"card  m-1 p-0 bg-light",style:{width:"47%"},children:[Object(u.jsx)("img",{src:i.ENDPOINT+"/media/"+e.picture,className:"card-img-top"}),Object(u.jsxs)("div",{className:"card-body p-1",children:[Object(u.jsx)("h6",{className:"card-title text-center open_sans fw-bold m-2 text-capitalize",children:e.name}),Object(u.jsxs)("small",{className:"card-text text-center d-block",children:["Cost: ",Object(u.jsxs)("b",{className:"text-danger",children:[" \u20b9",e.price]})]}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{className:"d-grid",children:Object(u.jsx)("button",{className:"btn bg-green fs-6 text-light mb-2 mx-2 fw-bold rubik rounded-pill d-block food",onClick:function(){!function(e,t){w.apply(this,arguments)}(t,e.objId),q.b.success("Added in cart",{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},children:"Order here"})})]})]},e.objId)}))})]})}),D=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){(function(){return k.apply(this,arguments)})().then((function(e){c(e)}))}),[]);var s=function(e){!function(e,t){P.apply(this,arguments)}(n[e].shopObjId,n[e].objId),c(n.filter((function(t){return t.objId!=n[e].objId})))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Hello This a Cart page"}),0==n.length?Object(u.jsx)("h2",{children:"Please add some product first"}):n.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("h3",{children:["Name : ",e.name]}),Object(u.jsxs)("h4",{children:["Price : ",e.price]}),Object(u.jsxs)("h4",{children:["Shop Name : ",e.shop]}),Object(u.jsxs)("h4",{children:["Quantity : ",e.quantity]}),Object(u.jsx)("button",{onClick:function(){!function(e){var t=n;t[e].quantity=t[e].quantity+1,C(t[e].shopObjId,t[e].objId,t[e].quantity),c(Object(m.a)(t))}(t)},children:"Increase"}),Object(u.jsx)("button",{onClick:function(){!function(e){var t=n;1!=t[e].quantity?(t[e].quantity=t[e].quantity-1,C(t[e].shopObjId,t[e].objId,t[e].quantity),c(Object(m.a)(t))):s(e)}(t)},children:"Decrease"}),Object(u.jsx)("button",{onClick:function(){s(t)},children:"Remove from Cart"})]},t)}))]})},B=n(39),A=n.n(B),F=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)("-1"),o=Object(r.a)(s,2),l=o[0],j=o[1],b={},p=localStorage.getItem("token"),h=JSON.stringify({query:"query{\n            baseProfileDetails{\n                objId\n                phoneNo\n                isShop\n                walletBalance\n                celoEncryptedMnemonic\n                celoAddress\n                studentProfile{\n                id\n                objId\n                name\n                collegeName\n                department\n                year\n                rollNo\n                emailId\n                phoneNo\n                }\n            }\n            }",variables:{}}),m={method:"post",url:i.GRAPHQL_ENDPOINT,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},data:h};return n||d()(m).then((function(e){c(!0),b={id:e.data.data.baseProfileDetails.objId,name:e.data.data.baseProfileDetails.studentProfile.name,department:e.data.data.baseProfileDetails.studentProfile.department,year:e.data.data.baseProfileDetails.studentProfile.year},j(JSON.stringify(b))})).catch((function(e){console.log(e)})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Hello This a Home page"}),"-1"!=l?Object(u.jsxs)("h5",{children:["Hi ",JSON.parse(l).name]}):Object(u.jsx)("a",{children:"Loading..."}),Object(u.jsx)(A.a,{value:l}),Object(u.jsx)("br",{}),Object(u.jsx)(g.b,{to:"/shops",children:"All Shops"})]})};var L=function(){return null==localStorage.getItem("token")?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{path:"/login",component:p}),Object(u.jsx)(o.b,{path:"/register",component:h}),Object(u.jsx)(o.a,{to:"/login"})]})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{path:"/",exact:!0,component:F}),Object(u.jsx)(o.b,{path:"/shops",exact:!0,component:v}),Object(u.jsx)(o.b,{path:"/shop/:shopid",exact:!0,component:T}),Object(u.jsx)(o.b,{path:"/cart",exact:!0,component:D}),Object(u.jsx)(o.a,{to:"/"})]})})};s.a.render(Object(u.jsx)(g.a,{children:Object(u.jsx)(L,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.c2a69e55.chunk.js.map